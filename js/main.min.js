var G=0,L=1,s=G,H="h",mb=document.getElementById("m"),m=document.getElementById("q"),l=document.getElementById("l"),go=document.getElementById("o"),lc=document.getElementById("c"),f=document.getElementById("f"),k=["a","d","ArrowLeft","ArrowRight"],po=document.getElementById("b"),p=document.getElementById("e"),pl=document.getElementById("k"),pr=document.getElementById("j"),ip=gf(p),cp=0,d=0,si=.02,sm=-2,sx=2,pt=360,o=document.getElementById("t"),st=document.getElementById("a"),sp={x:84,y:-16},oc=gr(o),df={x:gf(st).left-sp.x,y:gf(st).top-sp.y},iv=15,cv=iv,P=document.getElementById("p"),R=document.getElementById("r"),v=document.getElementById("n"),gc=document.getElementById("g"),g=document.getElementById("v"),sr=5,cl=1,ls={1:"",2:"-100px 0",3:"-200px 0"},sl=[],sd=0,oi=0,K={};function mp(){if(s==L)for(var t in K)if(K[t])switch(t){case"a":case"ArrowLeft":d>sm&&(d-=si,pr.classList.remove(H));break;case"d":case"ArrowRight":d<sx&&(d+=si,pl.classList.remove(H))}po.style.transform="rotate("+(cp+=d)+"deg)",(cp>pt||cp<-pt)&&(cp=0)}function ss(){var t=gf(p),e={x:t.left+p.offsetWidth/2-16,y:t.top+p.offsetHeight},s=document.createElement("div");s.setAttribute("id","s"+sd),sd++,s.classList.add("s"),s.classList.add("s"+Math.floor(3*Math.random()+1)),s.style.left=e.x+"px",s.style.top=e.y+"px",gc.insertBefore(s,g);var n=Math.atan2(oc.y-e.y,oc.x-e.x),o=5*Math.cos(n),c=5*Math.sin(n),l=setInterval(function(){s.style.left=(e.x+=o)+"px",s.style.top=(e.y+=c)+"px",ch(s)?(rv(s,l),gv()):ck(s)&&(sk(s),clearInterval(l),sl.push(s),ds())},10)}function ds(){sr--,sl.innerHTML=sr,R.innerHTML=sr,0==sr&&ct()}function gf(t){const e=t.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY}}function gr(t){var e=gf(t);return{x:e.left+t.offsetWidth/2,y:e.top+t.offsetHeight/2}}function ck(t){var e=gr(t),s=o.offsetWidth/2;return(oc.x-e.x)*(oc.x-e.x)+(oc.y-e.y)*(oc.y-e.y)<(s*=s)}function ch(t){var e=!1;return sl.forEach(function(s){var n=gf(t),o=n.left,c=n.left+t.offsetWidth,l=n.top,d=gf(s),i=d.left,r=d.left+s.offsetWidth,a=d.top,f=d.top+s.offsetHeight;e=o>=i&&o<=r&&l>=a&&l<=f||c>=i&&c<=r&&l>=a&&l<=f}),e}function rv(t,e){if(t&&t.parentElement){var s=t.getAttribute("id").split("s")[1];t.parentElement.removeChild(t);var n=document.getElementById("o"+s);n&&n.remove(),clearInterval(e)}}function sk(t){var e=gf(t),s=e.left-df.x,n=e.top-df.y,o=document.createElement("div");o.setAttribute("id","o"+oi),oi++,o.classList.add("i"),o.style.animationDuration=cv+"s",g.appendChild(o),t.style.position="absolute",t.style.left=s+"px",t.style.top=n+"px",o.appendChild(t),o.classList.add("d")}function cg(){cp=0,d=1,po.style.transform="rotate("+(cp+=d)+"deg)",p.style.left=ip.left,p.style.top=ip.top,sl.forEach(function(t){rv(t)}),sl=[]}function sg(t){s=L,m.classList.add(H),l.classList.add(H),mb.classList.add(H),go.classList.add(H),f.classList.add(H),cl=0==t?cl+=1:t,cv=iv-5*(cl-1),v.innerHTML=cl,sr=5*cl,R.innerHTML=sr,P.style.background="url(./img/sprite.png)"+ls[cl],cg()}function gv(){s=G,go.classList.remove(H),gt()}function ct(){s=G,3==cl?(f.classList.remove(H),lc.classList.add(H)):(lc.classList.remove(H),f.classList.add(H)),l.classList.remove(H),mb.classList.remove(H)}function gt(){lc.classList.add(H),f.classList.add(H),m.classList.remove(H),mb.classList.remove(H)}setInterval(mp,20),onkeydown=function(t){s==L&&t&&k.includes(t.key)&&(K[t.key]=!0)},onkeyup=function(t){s==L&&t&&k.includes(t.key)&&(K[t.key]=!1,pl.classList.add(H),pr.classList.add(H))},document.addEventListener("keyup",t=>{s==L&&"Space"==t.code&&sr>0&&ss()});